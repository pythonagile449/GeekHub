{% extends 'mainapp/article_detail.html' %}
{% load static %}
{% load martortags %}
{% load comments %}
{% load ratings %}

{% block title %}
    {{ title }} :: {{ block.super }}
{% endblock %}

{% block toolbar %}
    {% include '_inc/profile_toolbar.html' %}
{% endblock %}

{% block right_content %}
<div class="indent-40"></div> <!-- Жалобы-->
<div class="section-right-complaint-block">
    <div class="complaint-menu-field">
        <div class="content-complaint-title">
            {% if user.is_staff %}
                <h5-3>Жалобы пользователя <span class="username">{{ complaint_sender }}:</span></h5-3>
            {% else %}
                <h5-3>Мои жалобы:</h5-3>
            {% endif %}
        </div>
    </div>
    <div class="indent-10"></div>
    <div class="content-complaint">
        <ul class="user-complaints-list">
<!--            <div class="field-top-complaint">-->
<!--            </div>-->
            {% for complaint in complaints %}
                {% if complaint.status == 'M'%}
                <li class="user-complaint-item">
                    <div class="field-complaint">

                        <div class="field-30"><h5-1>Ссылка на публикацию:</h5-1></div>
                            <a href="{% url 'complaints:complaint_detail' complaint.content_object.pk complaint.sender.pk %}" class="link-complaint">
                                {{ complaint.content_object }}
                            </a>
                            <div class="indent-20"></div>

                        <div class="field-30-с"><h5-1>Текст жалобы:</h5-1></div><div>
                        <div class="complaint-bg">
                            {{ complaint.message }}
                        </div>
                    </div>
                        {% if user.is_staff %}
                                <div class="indent-50">
                                    <!--Отклонить-->
                                    <a href="{% url 'complaints:discard_complaint' complaint.pk %}" title="Отклонить">
                                        <button  class="button25" type="submit">Отклонить</button>
                                    </a>

                                    <!--Принять-->
                                    <a href="{% url 'complaints:approve_complaint' complaint.pk %}" title="Принять">
                                        <button  class="button26" type="submit">Принять</button>
                                    </a>
                                </div>
                        {% else %}
                            {% if complaint.status == 'M' %}
        <!--                            Отозвать-->
                                <div class="indent-50">
                                    <a href="{% url 'complaints:discard_complaint' complaint.pk %}" title="Отозвать">
                                        <button  class="button25" type="submit">Отозвать</button>
                                    </a>
                                </div>
                            {% elif complaint.status == 'D' %}
                                    (Отклонена)
                            {% elif complaint.status == 'A' %}
                                    (Принята)
                            {% endif %}
                        {% endif %}

                    </div>
                </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
{% block js %}
<!--    <script>-->
<!--    $(document).ready(function(){-->
<!--        if (history.state) {-->
<!--           $("#pxeMainDiv").scrollTop(history.state.data);-->
<!--        }-->
<!--        $("#pxeMainDiv").scroll(function() {-->
<!--           var scrollPos = $("#pxeMainDiv").scrollTop();-->
<!--           var stateObj = { data: scrollPos };-->
<!--           history.replaceState(stateObj, "");-->
<!--        });-->
<!--    });-->
<!--    </script>-->

{% endblock %}